/*
 * $Id: base64.js,v 0.9 2009/03/01 20:51:18 dankogai Exp dankogai $
 */(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=function(){var e=[],t="A".charCodeAt(0),n="a".charCodeAt(0),r="0".charCodeAt(0);for(var i=0;i<26;i++)e.push(t+i);for(var i=0;i<26;i++)e.push(n+i);for(var i=0;i<10;i++)e.push(r+i);return e.push("+".charCodeAt(0)),e.push("/".charCodeAt(0)),e}(),n=function(e){var t={};for(var n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(e),r=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t},i=function(e){var n=0;while(e.length%3)e.push(0),n++;var r=[];for(var i=0,s=e.length;i<s;i+=3){var o=e[i],u=e[i+1],a=e[i+2];if(o>=256||u>=256||a>=256)throw"unsupported character found";var f=o<<16|u<<8|a;r.push(t[f>>>18],t[f>>>12&63],t[f>>>6&63],t[f&63])}while(n--)r[r.length-n-1]="=".charCodeAt(0);return String.fromCharCode.apply(String,r)},s=function(e){e=e.replace(/[^A-Za-z0-9+\/]+/g,"");var t=[],r=e.length%4;for(var i=0,s=e.length;i<s;i+=4){var o=(n[e.charAt(i)]||0)<<18|(n[e.charAt(i+1)]||0)<<12|(n[e.charAt(i+2)]||0)<<6|(n[e.charAt(i+3)]||0);t.push(o>>16,o>>8&255,o&255)}return t.length-=[0,0,2,1][r],t},o=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];i<128?t.push(i):i<2048?t.push(192|i>>>6,128|i&63):t.push(224|i>>>12&15,128|i>>>6&63,128|i&63)}return t},u=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t.push(i);else{var s=e[++n];if(i<224)t.push((i&31)<<6|s&63);else{var o=e[++n];t.push((i&15)<<12|(s&63)<<6|o&63)}}}return t},a=function(e){return i(r(e))},f=function(e){return String.fromCharCode.apply(String,s(e))},l=function(e){return u(r(e))},c=function(e){return String.fromCharCode.apply(String,u(e))},h=function(e){return String.fromCharCode.apply(String,u(r(e)))},p=function(e){return o(r(e))},d=function(e){return String.fromCharCode.apply(String,o(e))},v=function(e){return String.fromCharCode.apply(String,o(r(e)))};if(window.btoa)var m=window.btoa,g=function(e){return m(v(e))};else var m=a,g=function(e){return i(p(e))};if(window.atob)var y=window.atob,b=function(e){return h(y(e))};else var y=f,b=function(e){return c(s(e))};window.Base64={convertUTF8ArrayToBase64:i,convertByteArrayToBase64:i,convertBase64ToUTF8Array:s,convertBase64ToByteArray:s,convertUTF16ArrayToUTF8Array:o,convertUTF16ArrayToByteArray:o,convertUTF8ArrayToUTF16Array:u,convertByteArrayToUTF16Array:u,convertUTF8StringToBase64:a,convertBase64ToUTF8String:f,convertUTF8StringToUTF16Array:l,convertUTF8ArrayToUTF16String:c,convertByteArrayToUTF16String:c,convertUTF8StringToUTF16String:h,convertUTF16StringToUTF8Array:p,convertUTF16StringToByteArray:p,convertUTF16ArrayToUTF8String:d,convertUTF16StringToUTF8String:v,convertUTF16StringToBase64:g,convertBase64ToUTF16String:b,fromBase64:f,toBase64:a,atob:y,btoa:m,utob:v,btou:h,encode:g,encodeURI:function(e){return g(e).replace(/[+\/]/g,function(e){return e=="+"?"-":"_"}).replace(/=+$/,"")},decode:function(e){return b(e.replace(/[-_]/g,function(e){return e=="-"?"+":"/"}))}}})();